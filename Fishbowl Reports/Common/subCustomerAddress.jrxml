<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="subCustomerAddress" pageWidth="250" pageHeight="350" whenNoDataType="AllSectionsNoDetail" columnWidth="250" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="85c670df-088e-4608-978f-1c868f871256">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<style name="9" fontName="Open Sans" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="10" isDefault="true" fontName="Open Sans" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="12" fontName="Open Sans" fontSize="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="14" fontName="Open Sans" fontSize="14" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="10b" fontName="Open Sans" fontSize="10" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="12b" fontName="Open Sans" fontSize="12" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="14b" fontName="Open Sans" fontSize="14" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="16b" fontName="Open Sans" fontSize="16" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="18b" fontName="Open Sans" fontSize="18" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="24b" fontName="Open Sans" fontSize="24" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="10i" fontName="Open Sans" fontSize="10" isBold="false" isItalic="true" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="12i" fontName="Open Sans" fontSize="12" isBold="false" isItalic="true" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="10bu" fontName="Open Sans" fontSize="10" isBold="true" isItalic="false" isUnderline="true" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="header1" fontName="Open Sans" fontSize="24" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="header2" fontName="Open Sans" fontSize="18" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="header3" fontName="Open Sans" fontSize="16" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="addressHeader" fontName="Open Sans" fontSize="14" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="date" fontName="Open Sans" fontSize="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="type" fontName="Open Sans" fontSize="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="address" fontName="Open Sans" fontSize="10" isBold="false" isItalic="true" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="column_head" fontName="Open Sans" fontSize="10" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="body" isDefault="true" fontName="Open Sans" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<style name="note" isDefault="true" fontName="Open Sans" fontSize="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
	<parameter name="ISSUBREPORTONLY" class="java.lang.String" isForPrompting="false"/>
	<parameter name="customerID" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["0"]]></defaultValueExpression>
	</parameter>
	<parameter name="CustomerName" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[null]]></defaultValueExpression>
	</parameter>
	<parameter name="Address" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[null]]></defaultValueExpression>
	</parameter>
	<parameter name="City" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[null]]></defaultValueExpression>
	</parameter>
	<parameter name="State" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[null]]></defaultValueExpression>
	</parameter>
	<parameter name="Zip" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[null]]></defaultValueExpression>
	</parameter>
	<parameter name="ShowPhone" class="java.lang.Boolean" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Boolean(false)]]></defaultValueExpression>
	</parameter>
	<parameter name="ShowFax" class="java.lang.Boolean" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Boolean(false)]]></defaultValueExpression>
	</parameter>
	<parameter name="ShowEmail" class="java.lang.Boolean" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Boolean(false)]]></defaultValueExpression>
	</parameter>
	<parameter name="Country" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[null]]></defaultValueExpression>
	</parameter>
	<parameter name="ShowCountry" class="java.lang.Boolean" isForPrompting="false">
		<defaultValueExpression><![CDATA[new Boolean(false)]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT COALESCE(customer.name, '') AS customername, COALESCE(address.name, '') AS addressname, COALESCE(addresstype.name, '') AS addresstype,
    COALESCE(address.address, '') AS streetaddress, COALESCE(address.city, '') AS city, COALESCE(address.zip, '') AS zip,
    COALESCE((SELECT stateconst.code FROM stateconst WHERE stateconst.id = address.stateid), '') AS state,
    COALESCE((SELECT countryconst.abbreviation FROM countryconst WHERE countryconst.id = address.countryid), '') AS country,
    COALESCE(contacttype.name, '') AS contacttype, COALESCE(contact.contactname, '') AS contactname, COALESCE(contact.datus, '') AS contactinfo

FROM customer
    LEFT OUTER JOIN address ON (address.accountid = customer.accountid)
    LEFT OUTER JOIN addresstype ON (address.typeid = addresstype.id)
    LEFT OUTER JOIN contact ON (contact.addressid = address.id)
    LEFT OUTER JOIN contacttype ON (contact.typeid = contacttype.id)

WHERE customer.id = $P{customerID}
  AND (address.id is null OR address.defaultflag = 1)
  AND (contact.id is null OR contact.defaultflag = 1)
  AND addresstype.id in (20,50)

ORDER BY address.typeid DESC, contacttype.name DESC]]>
	</queryString>
	<field name="CUSTOMERNAME" class="java.lang.String"/>
	<field name="ADDRESSNAME" class="java.lang.String"/>
	<field name="ADDRESSTYPE" class="java.lang.String"/>
	<field name="STREETADDRESS" class="java.lang.String"/>
	<field name="CITY" class="java.lang.String"/>
	<field name="ZIP" class="java.lang.String"/>
	<field name="STATE" class="java.lang.String"/>
	<field name="COUNTRY" class="java.lang.String"/>
	<field name="CONTACTTYPE" class="java.lang.String"/>
	<field name="CONTACTNAME" class="java.lang.String"/>
	<field name="CONTACTINFO" class="java.lang.String"/>
	<variable name="CUSTOMERNAME" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[$P{CustomerName} == null ?
    $F{CUSTOMERNAME} :
    $P{CustomerName}]]></variableExpression>
	</variable>
	<variable name="STREETADDRESS" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[$P{Address} == null ?
    $F{STREETADDRESS} :
    $P{Address}]]></variableExpression>
	</variable>
	<variable name="CITY" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[$P{City} == null ?
    $F{CITY} :
    $P{City}]]></variableExpression>
	</variable>
	<variable name="STATE" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[$P{State} == null ?
    $F{STATE} :
    $P{State}]]></variableExpression>
	</variable>
	<variable name="ZIP" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[$P{Zip} == null ?
    $F{ZIP} :
    $P{Zip}]]></variableExpression>
	</variable>
	<variable name="COUNTRY" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[$P{Country} == null ?
    $F{COUNTRY} :
    $P{Country}]]></variableExpression>
	</variable>
	<variable name="SHOWCOUNTRY" class="java.lang.Boolean"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="44" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="795fd6e3-a9d1-4360-8847-88436fc17265" key="textField" style="address" mode="Transparent" x="0" y="0" width="250" height="44" forecolor="#000000" backcolor="#FFFFFF"/>
				<box topPadding="2" leftPadding="2" bottomPadding="2" rightPadding="2">
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Open Sans"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[($V{CUSTOMERNAME}==null ? "" : $V{CUSTOMERNAME} + "\n") +
($V{STREETADDRESS}==null ? "" : $V{STREETADDRESS} + "\n") +
($V{CITY}==null ? "" : $V{CITY}) +($V{STATE}==null ? "" : ", " + $V{STATE}) + ($V{ZIP}== null ? "" : "  " + $V{ZIP}) +
($P{ShowCountry} ? ($V{COUNTRY}== null ? "" : "\n" + $V{COUNTRY}) : "")]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="14" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement uuid="f8375f44-f4c6-47a6-b46f-1913940f10df" key="textField-1" style="address" mode="Transparent" x="0" y="0" width="250" height="14" isRemoveLineWhenBlank="true" forecolor="#000000" backcolor="#FFFFFF">
					<printWhenExpression><![CDATA[$F{CONTACTNAME} != null &&
($F{CONTACTTYPE}.equals("Fax") ?
    $P{ShowFax} :
    ($F{CONTACTTYPE}.equals("Email") ?
        $P{ShowEmail} :
        ($F{CONTACTTYPE}.equals("Main") ?
            $P{ShowPhone} :
            false)))]]></printWhenExpression>
				</reportElement>
				<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Open Sans" size="10"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{CONTACTINFO}== null ? "" : ($F{CONTACTTYPE}.equals("Main")
	? "Phone"
	: $F{CONTACTTYPE})
 + ": " + $F{CONTACTINFO})]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="1" splitType="Stretch">
			<line direction="BottomUp">
				<reportElement uuid="6dabada5-c6c3-454c-b5cb-846bf86be84c" key="line-1" mode="Opaque" x="0" y="0" width="250" height="1" forecolor="#000000" backcolor="#FFFFFF"/>
				<graphicElement fill="Solid">
					<pen lineWidth="1.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
		</band>
	</summary>
</jasperReport>
